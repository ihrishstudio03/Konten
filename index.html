<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generator v7.0 (Optimized)</title>
<style>
    :root {
        --primary: #546e7a; /* Blue Grey */
        --secondary: #b0bec5;
        --bg-color: #eceff1;
        --card-bg: #ffffff;
        --text: #37474f;
        --btn-color: #455a64;
        --btn-hover: #263238;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg-color);
        color: var(--text);
        margin: 0;
        padding: 20px;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: flex-start;
    }

    .container {
        background: var(--card-bg);
        width: 100%;
        max-width: 750px;
        padding: 35px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.05);
        border: 1px solid #cfd8dc;
    }

    h1 {
        text-align: center;
        color: var(--primary);
        font-size: 28px;
        margin: 0 0 5px 0;
        font-weight: 800;
        letter-spacing: -0.5px;
    }

    p.subtitle {
        text-align: center;
        color: #78909c;
        font-size: 14px;
        margin-bottom: 30px;
    }

    /* BOX STYLING */
    .control-box {
        background: #f4f7f8;
        padding: 20px;
        border-radius: 15px;
        border: 1px solid #cfd8dc;
        margin-bottom: 20px;
    }

    .section-label {
        font-size: 11px;
        font-weight: 800;
        text-transform: uppercase;
        color: var(--primary);
        margin-bottom: 10px;
        letter-spacing: 1px;
        display: block;
    }

    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

    @media (max-width: 600px) {
        .grid-2, .grid-3 { grid-template-columns: 1fr; }
    }

    label {
        display: block;
        font-size: 12px;
        font-weight: 700;
        margin-bottom: 6px;
        color: #546e7a;
    }

    input, select {
        width: 100%;
        padding: 14px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        font-size: 14px;
        box-sizing: border-box;
        transition: 0.2s;
        background: #fff;
        color: #333;
    }

    input:focus, select:focus {
        border-color: var(--primary);
        outline: none;
        box-shadow: 0 0 0 3px rgba(84, 110, 122, 0.1);
    }

    /* SLIDE CARD */
    .slide-item {
        background: #fff;
        border: 1px solid #e0e0e0;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 15px;
        position: relative;
    }

    .slide-badge {
        position: absolute;
        top: -10px;
        left: 15px;
        background: var(--primary);
        color: white;
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 10px;
        font-weight: bold;
    }

    .text-group {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px dashed #e0e0e0;
    }
    @media (max-width: 600px) { .text-group { grid-template-columns: 1fr; } }

    button.generate-btn {
        width: 100%;
        background-color: var(--btn-color);
        color: white;
        border: none;
        padding: 18px;
        font-size: 16px;
        font-weight: 800;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 20px;
        box-shadow: 0 4px 0 #263238;
    }
    button.generate-btn:hover { background-color: var(--btn-hover); transform: translateY(-2px); }
    button.generate-btn:active { transform: translateY(2px); box-shadow: none; }

    /* RESULT AREA */
    .result-box { margin-top: 40px; display: none; }
    
    .prompt-card {
        background: #263238;
        color: #eceff1;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 15px;
        font-family: 'Consolas', monospace;
        font-size: 12px;
        line-height: 1.6;
        position: relative;
        border-left: 5px solid #78909c;
    }

    .prompt-content { margin-right: 70px; word-wrap: break-word; }

    .copy-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: #546e7a;
        color: white;
        border: none;
        padding: 6px 14px;
        border-radius: 6px;
        font-size: 11px;
        cursor: pointer;
        font-weight: bold;
        transition: 0.2s;
    }
    .copy-btn:hover { background: #78909c; }

</style>
</head>
<body>

<div class="container">
    <h1>üé® Generator v7.0</h1>
    <p class="subtitle">Optimized Layout & Foreground Logic</p>

    <div class="control-box">
        <span class="section-label">PENGATURAN UTAMA</span>
        <div class="grid-2">
            <div>
                <label>Gaya Visual</label>
                <select id="art-style" onchange="updateUIForStyle()" style="font-weight:bold;">
                    <option value="paper">‚úÇÔ∏è 3D Paper Craft (Origami)</option>
                    <option value="watercolor">üé® Watercolor (Cat Air)</option>
                </select>
            </div>
            <div>
                <label>Mode Konten</label>
                <select id="mode" onchange="toggleMode()">
                    <option value="single">Single Image</option>
                    <option value="carousel">Carousel (Cerita)</option>
                </select>
            </div>
        </div>
    </div>

    <div class="grid-2">
        <div id="bg-color-wrapper">
             <label>Warna Latar</label>
            <select id="bg-color">
                <optgroup label="Neutral & Clean">
                    <option value="Warm Beige">Warm Beige</option>
                    <option value="Clean White">Clean White</option>
                </optgroup>
                <optgroup label="Pastel Colors">
                    <option value="Soft Pastel Pink">Soft Pink</option>
                    <option value="Pale Blue">Pale Blue</option>
                    <option value="Soft Mint Green">Mint Green</option>
                    <option value="Sunny Yellow">Sunny Yellow</option>
                </optgroup>
                <optgroup label="Bold Colors">
                    <option value="Deep Navy Blue">Navy Blue</option>
                    <option value="Emerald Green">Emerald Green</option>
                    <option value="Warm Sunset Orange">Sunset Orange</option>
                </optgroup>
            </select>
        </div>
        <div>
             <label>Ikon Dekorasi (Penting)</label>
            <input type="text" id="icons" value="Daun, awan, buku" placeholder="Benda di sekeliling...">
        </div>
    </div>
    
    <div class="grid-2" style="margin-top:15px">
        <div>
            <label>Rasio Gambar</label>
            <select id="ratio">
                <option value="--ar 4:5">Portrait (IG Feed)</option>
                <option value="--ar 1:1">Square (1:1)</option>
                <option value="--ar 9:16">Reels / Story</option>
            </select>
        </div>
        <div>
            <label>Footer Sosmed</label>
            <input type="text" id="sosmed" placeholder="Contoh: @namakamu">
        </div>
    </div>

    <div class="control-box" style="margin-top:20px;">
        <span class="section-label">üß¨ KARAKTER (GAYA KARTUN/ILUSTRASI)</span>
        <div class="grid-3">
            <div>
                <label>Gender</label>
                <select id="char-gender">
                    <option value="Muslim man">Pria Muslim</option>
                    <option value="Muslim woman hijab">Wanita Hijab</option>
                    <option value="Little Muslim boy">Anak Laki</option>
                    <option value="Little Muslim girl hijab">Anak Perempuan</option>
                </select>
            </div>
            <div>
                <label>Atasan</label>
                <input type="text" id="char-top" placeholder="Misal: Koko Putih">
            </div>
            <div>
                <label>Bawahan</label>
                <input type="text" id="char-bottom" placeholder="Misal: Sarung Biru">
            </div>
        </div>
    </div>

    <div id="single-area">
        <div class="slide-item">
            <div class="slide-badge">SINGLE POST</div>
            <label>Aktivitas Karakter</label>
            <input type="text" id="act-single" placeholder="Sedang apa? (Misal: Duduk berdoa)">
            <div class="text-group">
                <div><label>Judul Utama (Besar)</label><input type="text" id="head-single"></div>
                <div><label>Sub-Teks (Kecil)</label><input type="text" id="sub-single"></div>
            </div>
        </div>
    </div>

    <div id="carousel-area" style="display:none">
        <div style="margin-bottom:15px;">
            <label>Jumlah Slide</label>
            <select id="slide-count" style="width:100px" onchange="renderSlides()">
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>
        <div id="slides-container"></div>
    </div>

    <button class="generate-btn" onclick="generatePrompt()">‚ú® GENERATE PROMPT (V7)</button>

    <div class="result-box" id="resultArea">
        <h3 style="text-align:center; font-size:14px; color:#555; margin-bottom:15px;">SALIN HASIL DI BAWAH:</h3>
        <div id="outputContainer"></div>
    </div>
</div>

<script>
    // --- KAMUS OPTIMAL ---
    const dictionary = {
        "putih":"white", "hitam":"black", "merah":"red", "biru":"blue", "hijau":"green", 
        "kuning":"yellow", "coklat":"brown", "abu":"grey", "pink":"pink", "ungu":"purple", "krem":"beige",
        "koko":"koko shirt", "kemeja":"shirt", "kaos":"t-shirt", "gamis":"robe", "dress":"dress",
        "celana":"trousers", "sarung":"sarong", "rok":"skirt", "jilbab":"hijab",
        "duduk":"sitting", "berdiri":"standing", "baca":"reading", "sholat":"praying", 
        "jalan":"walking", "lari":"running", "tidur":"sleeping", "sujud":"sujud position",
        "menangis":"crying", "sedih":"sad", "senyum":"smiling", "merenung":"contemplating", "tertawa":"laughing",
        "masjid":"mosque", "taman":"garden", "rumah":"house", "sekolah":"school", "kelas":"classroom"
    };

    function translate(text) {
        if(!text) return "";
        let cleanText = text.toLowerCase();
        // Fix phrase umum
        cleanText = cleanText.replace("baju koko", "koko shirt");
        cleanText = cleanText.replace("anak laki", "little boy");
        cleanText = cleanText.replace("anak perempuan", "little girl");
        cleanText = cleanText.replace("wanita hijab", "woman wearing hijab");
        return cleanText.split(' ').map(w => dictionary[w] || w).join(' ');
    }

    function toggleMode() {
        const isCarousel = document.getElementById('mode').value === 'carousel';
        document.getElementById('single-area').style.display = isCarousel ? 'none' : 'block';
        document.getElementById('carousel-area').style.display = isCarousel ? 'block' : 'none';
        if(isCarousel) renderSlides();
    }

    function updateUIForStyle() {
        const style = document.getElementById('art-style').value;
        const bgWrapper = document.getElementById('bg-color-wrapper');
        // Paper butuh BG color selector, Watercolor locked to texture
        bgWrapper.style.opacity = style === 'paper' ? '1' : '0.5';
        bgWrapper.style.pointerEvents = style === 'paper' ? 'auto' : 'none';
    }

    function renderSlides() {
        const count = document.getElementById('slide-count').value;
        const container = document.getElementById('slides-container');
        container.innerHTML = "";
        for(let i=1; i<=count; i++) {
            container.innerHTML += `
            <div class="slide-item">
                <div class="slide-badge">SLIDE ${i}</div>
                <label>Aktivitas</label>
                <input type="text" id="act-${i}" placeholder="Aktivitas...">
                <div class="text-group">
                    <div><label>Judul</label><input type="text" id="head-${i}"></div>
                    <div><label>Sub-Teks</label><input type="text" id="sub-${i}"></div>
                </div>
            </div>`;
        }
    }

    // --- LOGIKA UTAMA ---
    function generatePrompt() {
        const selectedStyle = document.getElementById('art-style').value;
        const ratio = document.getElementById('ratio').value;
        const sosmed = document.getElementById('sosmed').value;
        let iconsRaw = translate(document.getElementById('icons').value) || "abstract shapes";
        const bg = document.getElementById('bg-color').value;

        // 1. STYLE ENVIRONMENT (High Quality Texture)
        let mainStyle = "";
        let envPrompt = "";
        let textStyle = "";

        if (selectedStyle === 'paper') {
            mainStyle = "3D paper craft illustration, origami style, folded paper texture, low poly art, minimalist composition";
            textStyle = "3D paper text";
            // FOREGROUND FIX: Mengembalikan logika "in the background" dan "blurry bokeh in the very front"
            envPrompt = `Environment: Floating 3D paper ${iconsRaw} in the background and blurry bokeh ${iconsRaw} in the very front.`;
        } else {
            mainStyle = "Hand-drawn watercolor illustration, soft pastel and earthy tones, gentle lighting, emotional mood, storybook illustration style";
            textStyle = "whimsical watercolor typography";
            envPrompt = `Environment: Surrounded by hand-painted ${iconsRaw} elements integrated into the paper texture.`;
        }

        // 2. CHARACTER DNA (Cartoon/Cute Focus)
        const gender = document.getElementById('char-gender').value;
        const top = translate(document.getElementById('char-top').value) || "cream shirt";
        const bot = translate(document.getElementById('char-bottom').value) || "brown trousers";
        // Kunci "Cartoon Proportions" hanya di karakter
        const charDNA = `A cute stylized faceless ${gender}, cartoon proportions, simplified anatomy (not realistic), wearing ${top} and ${bot}, rendered in ${selectedStyle === 'paper' ? 'origami style' : 'whimsical watercolor style'}`;

        // 3. GENERATION LOOP
        const mode = document.getElementById('mode').value;
        let html = "";

        if(mode === 'single') {
            html = buildCardHTML("Single Post", 
                document.getElementById('act-single').value,
                document.getElementById('head-single').value,
                document.getElementById('sub-single').value,
                mainStyle, charDNA, envPrompt, textStyle, bg, sosmed, ratio, selectedStyle
            );
        } else {
            const count = document.getElementById('slide-count').value;
            for(let i=1; i<=count; i++) {
                html += buildCardHTML(`Slide ${i}`,
                    document.getElementById(`act-${i}`).value,
                    document.getElementById(`head-${i}`).value,
                    document.getElementById(`sub-${i}`).value,
                    mainStyle, charDNA, envPrompt, textStyle, bg, sosmed, ratio, selectedStyle
                );
            }
        }

        document.getElementById('outputContainer').innerHTML = html;
        document.getElementById('resultArea').style.display = 'block';
    }

    // Helper untuk merakit prompt per slide
    function buildCardHTML(label, actRaw, head, sub, mainStyle, charDNA, envPrompt, textStyle, bg, sosmed, ratio, styleType) {
        let act = translate(actRaw) || "standing";
        
        // Layout Logic (Text Top, Char Bottom)
        let layoutPrompt = "";
        if(head || sub) {
            layoutPrompt += `. Text Layout: Big bold ${textStyle} "${head||''}" placed in the top negative space (header area). `;
            if(sub) layoutPrompt += `Below the title, smaller clean text "${sub}". `;
            layoutPrompt += "Ensure text DOES NOT cover the character. ";
            
            // Force Char Bottom
            if(styleType === 'paper') layoutPrompt += `Composition: Vertical layout. The character is positioned in the lower center section. Clean negative space at the top for text. Background: ${bg} background. `;
            else layoutPrompt += `Composition: Vertical layout. The character is placed in the bottom section of the paper. Vast empty watercolor paper texture at the top for typography. `;
        } else {
            // No Text = Center
            if(styleType === 'paper') layoutPrompt += `Composition: Character in the center. Background: ${bg} background. `;
            else layoutPrompt += `Composition: Character centered. Textured watercolor paper background. `;
        }

        let footer = sosmed ? `Footer: Small text "${sosmed}" at the very bottom edge. ` : "";
        
        const fullPrompt = `${mainStyle}. ${charDNA}, ${act}${layoutPrompt} ${envPrompt} ${footer} high quality. ${ratio}`;
        
        const uniqueId = "prompt-" + Math.random().toString(36).substr(2, 9);
        return `
        <div class="prompt-card">
            <div style="margin-bottom:5px; color:#b0bec5; font-size:10px; text-transform:uppercase; font-weight:bold;">${label}</div>
            <div id="${uniqueId}" class="prompt-content">${fullPrompt}</div>
            <button class="copy-btn" onclick="copySafe('${uniqueId}', this)">COPY</button>
        </div>`;
    }

    function copySafe(elementId, btnElement) {
        const textToCopy = document.getElementById(elementId).innerText;
        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(textToCopy).then(() => showCopied(btnElement)).catch(() => fallbackCopy(textToCopy, btnElement));
        } else { fallbackCopy(textToCopy, btnElement); }
    }

    function fallbackCopy(text, btnElement) {
        let textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed"; textArea.style.left = "-9999px";
        document.body.appendChild(textArea);
        textArea.focus(); textArea.select();
        try { document.execCommand('copy'); showCopied(btnElement); } catch (err) { alert('Copy manual ya!'); }
        document.body.removeChild(textArea);
    }

    function showCopied(btnElement) {
        const originalText = btnElement.innerText;
        btnElement.innerText = "COPIED!";
        btnElement.style.background = "#26a69a";
        setTimeout(() => {
            btnElement.innerText = originalText;
            btnElement.style.background = "#546e7a";
        }, 1500);
    }

    renderSlides();
    updateUIForStyle();
</script>

</body>
</html>
