<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paper Craft Gen v4.1 (Fixed Copy)</title>
<style>
    :root {
        --primary: #5c8d89; /* Teal Muted */
        --secondary: #74b49b;
        --bg-color: #f7f9f9;
        --card-bg: #ffffff;
        --text-color: #2c3e50;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        margin: 0;
        padding: 20px;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: flex-start;
    }

    .container {
        background: var(--card-bg);
        width: 100%;
        max-width: 680px;
        padding: 35px;
        border-radius: 16px;
        box-shadow: 0 12px 24px rgba(0,0,0,0.05);
        border: 1px solid #e1e8ed;
    }

    h1 {
        text-align: center;
        color: var(--primary);
        font-size: 26px;
        margin: 0 0 5px 0;
        letter-spacing: -0.5px;
    }

    p.subtitle {
        text-align: center;
        color: #7f8c8d;
        font-size: 14px;
        margin-bottom: 30px;
    }

    /* SECTION STYLING */
    .dna-box {
        background: #f0f4f4;
        border: 1px dashed var(--primary);
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 25px;
    }

    .section-header {
        font-size: 12px;
        font-weight: 800;
        text-transform: uppercase;
        color: var(--primary);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

    label {
        display: block;
        font-size: 12px;
        font-weight: 700;
        margin-bottom: 6px;
        color: #555;
    }

    input, select, textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 14px;
        box-sizing: border-box;
        transition: 0.2s;
        font-family: inherit;
    }

    input:focus, select:focus {
        border-color: var(--secondary);
        outline: none;
        background: #fff;
    }

    /* SLIDE ITEM */
    .slide-item {
        background: #fff;
        border: 1px solid #eee;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        position: relative;
    }

    .slide-badge {
        position: absolute;
        top: -10px;
        left: 15px;
        background: var(--text-color);
        color: white;
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 11px;
        font-weight: bold;
    }

    .text-group {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid #f0f0f0;
    }

    button.generate-btn {
        width: 100%;
        background-color: var(--primary);
        color: white;
        border: none;
        padding: 16px;
        font-size: 16px;
        font-weight: bold;
        border-radius: 10px;
        cursor: pointer;
        transition: background 0.3s;
        margin-top: 15px;
        box-shadow: 0 4px 0 #466e6b;
    }
    button.generate-btn:active { box-shadow: none; transform: translateY(4px); }

    .result-box { margin-top: 40px; display: none; }
    
    .prompt-card {
        background: #222;
        color: #eee;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 15px;
        font-family: 'Consolas', monospace;
        font-size: 12px;
        line-height: 1.6;
        position: relative;
    }

    /* Text Container khusus agar mudah dicopy */
    .prompt-text-content {
        word-wrap: break-word;
        margin-right: 60px; /* Space for button */
    }

    .copy-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #27ae60;
        color: white;
        border: none;
        padding: 5px 12px;
        border-radius: 4px;
        font-size: 11px;
        cursor: pointer;
        font-weight: bold;
        transition: 0.2s;
    }
    
    .copy-btn.copied {
        background: #2ecc71;
        content: "COPIED!";
    }
</style>
</head>
<body>

<div class="container">
    <h1>‚úÇÔ∏è Paper Craft V4.1</h1>
    <p class="subtitle">Konsisten Karakter + Judul & Sub-Teks (Fixed Copy)</p>

    <div class="grid-2">
        <div>
            <label>Mode Konten</label>
            <select id="mode" onchange="toggleMode()">
                <option value="single">Single Image</option>
                <option value="carousel">Carousel (Cerita)</option>
            </select>
        </div>
        <div>
            <label>Rasio</label>
            <select id="ratio">
                <option value="--ar 4:5">Portrait (IG Feed)</option>
                <option value="--ar 1:1">Square (1:1)</option>
                <option value="--ar 9:16">Reels / Story</option>
            </select>
        </div>
    </div>

    <div style="height: 20px;"></div>

    <div class="dna-box">
        <div class="section-header">üß¨ Karakter Konsisten (Wajib)</div>
        <div class="grid-3">
            <div>
                <label>Gender</label>
                <select id="char-gender">
                    <option value="Muslim man">Pria Muslim</option>
                    <option value="Muslim woman hijab">Wanita Hijab</option>
                    <option value="Little Muslim boy">Anak Laki</option>
                    <option value="Little Muslim girl hijab">Anak Perempuan</option>
                </select>
            </div>
            <div>
                <label>Warna Atasan</label>
                <input type="text" id="char-top" placeholder="Misal: Koko Putih">
            </div>
            <div>
                <label>Warna Bawahan</label>
                <input type="text" id="char-bottom" placeholder="Misal: Sarung Coklat">
            </div>
        </div>
    </div>

    <div id="single-area">
        <div class="slide-item">
            <div class="slide-badge">SINGLE POST</div>
            <label>Aktivitas Karakter</label>
            <input type="text" id="act-single" placeholder="Sedang apa? (Misal: Duduk berdoa)">
            
            <div class="text-group">
                <div>
                    <label>Judul Utama (Besar)</label>
                    <input type="text" id="head-single" placeholder="Contoh: SABAR">
                </div>
                <div>
                    <label>Sub-Teks (Kecil & Jelas)</label>
                    <input type="text" id="sub-single" placeholder="Contoh: Kunci masuk surga">
                </div>
            </div>
        </div>
    </div>

    <div id="carousel-area" style="display:none">
        <div style="margin-bottom:20px; display:flex; align-items:center; gap:10px;">
            <label style="margin:0">Jumlah Slide:</label>
            <select id="slide-count" style="width:100px" onchange="renderSlides()">
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
            </select>
        </div>
        <div id="slides-container"></div>
    </div>

    <div class="grid-2">
        <div>
             <label>Warna Latar</label>
            <select id="bg-color">
                <option value="Warm Beige">Beige (Default)</option>
                <option value="Soft Mint Green">Mint Green</option>
                <option value="Pale Blue">Pale Blue</option>
                <option value="Clean White">Clean White</option>
                <option value="Soft Pink">Soft Pink</option>
            </select>
        </div>
        <div>
             <label>Ikon Dekorasi</label>
            <input type="text" id="icons" value="Buku, tanaman, lampu" placeholder="Benda melayang...">
        </div>
    </div>

    <button class="generate-btn" onclick="generatePrompt()">‚ú® GENERATE CODE</button>

    <div class="result-box" id="resultArea">
        <h3 style="text-align:center; font-size:14px; color:#555">HASIL PROMPT:</h3>
        <div id="outputContainer"></div>
    </div>
</div>

<script>
    // 1. KAMUS TRANSLATE
    const dictionary = {
        "putih":"white", "hitam":"black", "merah":"red", "biru":"blue", "hijau":"green", 
        "kuning":"yellow", "coklat":"brown", "abu":"grey", "pink":"pink", "ungu":"purple", "krem":"beige",
        "koko":"koko shirt", "kemeja":"shirt", "kaos":"t-shirt", "gamis":"robe", "dress":"dress",
        "celana":"trousers", "sarung":"sarong", "rok":"skirt", 
        "duduk":"sitting", "berdiri":"standing", "baca":"reading", "sholat":"praying", 
        "jalan":"walking", "lari":"running", "tidur":"sleeping", "kerja":"working", "sujud":"sujud position",
        "menangis":"crying", "sedih":"sad", "senyum":"smiling",
        "masjid":"mosque", "taman":"garden", "rumah":"house", "kamar":"bedroom"
    };

    function translate(text) {
        if(!text) return "";
        return text.toLowerCase().split(' ').map(w => dictionary[w] || w).join(' ');
    }

    function toggleMode() {
        const isCarousel = document.getElementById('mode').value === 'carousel';
        document.getElementById('single-area').style.display = isCarousel ? 'none' : 'block';
        document.getElementById('carousel-area').style.display = isCarousel ? 'block' : 'none';
        if(isCarousel) renderSlides();
    }

    function renderSlides() {
        const count = document.getElementById('slide-count').value;
        const container = document.getElementById('slides-container');
        container.innerHTML = "";
        
        for(let i=1; i<=count; i++) {
            container.innerHTML += `
            <div class="slide-item">
                <div class="slide-badge">SLIDE ${i}</div>
                <label>Aktivitas</label>
                <input type="text" id="act-${i}" placeholder="Aktivitas slide ${i}...">
                
                <div class="text-group">
                    <div>
                        <label>Judul Slide ${i}</label>
                        <input type="text" id="head-${i}" placeholder="Judul besar...">
                    </div>
                    <div>
                        <label>Sub-Teks Slide ${i}</label>
                        <input type="text" id="sub-${i}" placeholder="Keterangan kecil...">
                    </div>
                </div>
            </div>`;
        }
    }

    function buildTextPrompt(head, sub) {
        if (!head && !sub) return "";
        
        let p = ". Text Layout: ";
        if (head) p += `Big bold 3D paper text "${head}" in the center. `;
        if (sub) p += `Below it, add smaller clearly readable text "${sub}" using clean sans-serif font. `;
        return p;
    }

    function generatePrompt() {
        // DNA
        const gender = document.getElementById('char-gender').value;
        const top = translate(document.getElementById('char-top').value) || "white shirt";
        const bot = translate(document.getElementById('char-bottom').value) || "green trousers";
        const charDNA = `A faceless ${gender}, wearing ${top} and ${bot}`;

        // ENV
        const bg = document.getElementById('bg-color').value;
        const icons = translate(document.getElementById('icons').value);
        const style = "3D paper craft illustration, origami style, folded paper texture, low poly art";
        const env = `Floating paper icons: ${icons}. Soft studio lighting, ${bg} background, minimalist composition`;
        const ratio = document.getElementById('ratio').value;

        // LOOP
        const mode = document.getElementById('mode').value;
        let html = "";

        if(mode === 'single') {
            const act = translate(document.getElementById('act-single').value);
            const head = document.getElementById('head-single').value;
            const sub = document.getElementById('sub-single').value;
            
            const txtPrompt = buildTextPrompt(head, sub);
            const fullPrompt = `${style}. ${charDNA}, ${act}${txtPrompt}. ${env}, high quality. ${ratio}`;
            
            html = makeCard("Single Post", fullPrompt);
        } else {
            const count = document.getElementById('slide-count').value;
            for(let i=1; i<=count; i++) {
                const act = translate(document.getElementById(`act-${i}`).value);
                const head = document.getElementById(`head-${i}`).value;
                const sub = document.getElementById(`sub-${i}`).value;

                const txtPrompt = buildTextPrompt(head, sub);
                const fullPrompt = `${style}. ${charDNA}, ${act}${txtPrompt}. ${env}, high quality. ${ratio}`;
                
                html += makeCard(`Slide ${i}`, fullPrompt);
            }
        }

        document.getElementById('outputContainer').innerHTML = html;
        document.getElementById('resultArea').style.display = 'block';
    }

    // 2. FUNGSI COPY YANG LEBIH AMAN (FIXED)
    function makeCard(title, text) {
        // Kita buat ID unik untuk setiap blok teks agar bisa diambil spesifik
        const uniqueId = "prompt-" + Math.random().toString(36).substr(2, 9);
        
        return `
        <div class="prompt-card">
            <div style="margin-bottom:5px; color:#888; font-size:10px; text-transform:uppercase; font-weight:bold;">${title}</div>
            
            <div id="${uniqueId}" class="prompt-text-content">${text}</div>
            
            <button class="copy-btn" onclick="copySpecificText('${uniqueId}', this)">COPY</button>
        </div>`;
    }

    function copySpecificText(elementId, btnElement) {
        // Ambil teks dari elemen berdasarkan ID
        const textToCopy = document.getElementById(elementId).innerText;
        
        navigator.clipboard.writeText(textToCopy).then(() => {
            // Ubah tampilan tombol sesaat
            const originalText = btnElement.innerText;
            btnElement.innerText = "COPIED!";
            btnElement.style.background = "#2ecc71";
            
            setTimeout(() => {
                btnElement.innerText = originalText;
                btnElement.style.background = "#27ae60";
            }, 1500);
        }).catch(err => {
            console.error('Gagal copy:', err);
            alert("Gagal copy otomatis. Silakan blok dan copy manual.");
        });
    }

    // Init
    renderSlides();
</script>

</body>
</html>
