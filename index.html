<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generator v8.3 (Refined Smooth Painterly)</title>
<style>
    :root {
        --primary: #455a64; 
        --secondary: #90a4ae;
        --bg-color: #eceff1;
        --card-bg: #ffffff;
        --text: #37474f;
        --btn-color: #263238;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg-color);
        color: var(--text);
        margin: 0;
        padding: 20px;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: flex-start;
    }

    .container {
        background: var(--card-bg);
        width: 100%;
        max-width: 750px;
        padding: 35px;
        border-radius: 20px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.08);
        border: 1px solid #cfd8dc;
    }

    h1 {
        text-align: center;
        color: var(--primary);
        font-size: 28px;
        margin: 0 0 5px 0;
        font-weight: 800;
    }

    p.subtitle {
        text-align: center;
        color: #78909c;
        font-size: 14px;
        margin-bottom: 30px;
    }

    /* BOX STYLING */
    .control-box {
        background: #f4f7f8;
        padding: 20px;
        border-radius: 15px;
        border: 1px solid #cfd8dc;
        margin-bottom: 20px;
    }

    .section-label {
        font-size: 11px;
        font-weight: 800;
        text-transform: uppercase;
        color: var(--primary);
        margin-bottom: 10px;
        letter-spacing: 1px;
        display: block;
    }

    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

    @media (max-width: 600px) {
        .grid-2, .grid-3 { grid-template-columns: 1fr; }
    }

    label {
        display: block;
        font-size: 12px;
        font-weight: 700;
        margin-bottom: 6px;
        color: #546e7a;
    }

    input, select {
        width: 100%;
        padding: 14px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        font-size: 14px;
        box-sizing: border-box;
        transition: 0.2s;
        background: #fff;
        color: #333;
    }

    input:focus, select:focus {
        border-color: var(--primary);
        outline: none;
        box-shadow: 0 0 0 3px rgba(84, 110, 122, 0.1);
    }

    /* SLIDER STYLE */
    input[type=range] {
        -webkit-appearance: none; 
        background: transparent; 
        border: none;
        padding: 5px 0;
    }
    input[type=range]::-webkit-slider-thumb {
        -webkit-appearance: none;
        height: 20px; width: 20px;
        border-radius: 50%;
        background: var(--primary);
        cursor: pointer;
        margin-top: -8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    input[type=range]::-webkit-slider-runnable-track {
        width: 100%; height: 4px;
        background: #cfd8dc;
        border-radius: 2px;
    }

    /* Toggle Switch Style */
    .bg-toggle {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        background: #e0e0e0;
        padding: 5px;
        border-radius: 10px;
    }
    .bg-option {
        flex: 1;
        text-align: center;
        padding: 10px;
        cursor: pointer;
        border-radius: 8px;
        font-size: 13px;
        font-weight: bold;
        transition: 0.3s;
    }
    .bg-option.active {
        background: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        color: var(--primary);
    }

    /* SLIDE CARD */
    .slide-item {
        background: #fff;
        border: 1px solid #e0e0e0;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 15px;
        position: relative;
    }

    .slide-badge {
        position: absolute;
        top: -10px;
        left: 15px;
        background: var(--primary);
        color: white;
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 10px;
        font-weight: bold;
    }

    .text-group {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px dashed #e0e0e0;
    }

    button.generate-btn {
        width: 100%;
        background-color: var(--btn-color);
        color: white;
        border: none;
        padding: 18px;
        font-size: 16px;
        font-weight: 800;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 20px;
        box-shadow: 0 4px 0 #1b2529;
    }
    button.generate-btn:hover { background-color: #37474f; transform: translateY(-2px); }

    /* RESULT AREA */
    .result-box { margin-top: 40px; display: none; }
    
    .prompt-card {
        background: #263238;
        color: #eceff1;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 15px;
        font-family: 'Consolas', monospace;
        font-size: 12px;
        line-height: 1.6;
        position: relative;
        border-left: 5px solid #78909c;
    }

    .copy-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: #546e7a;
        color: white;
        border: none;
        padding: 6px 14px;
        border-radius: 6px;
        font-size: 11px;
        cursor: pointer;
        font-weight: bold;
        transition: 0.2s;
    }
</style>
</head>
<body>

<div class="container">
    <h1>üé® Generator v8.3</h1>
    <p class="subtitle">Refined Smooth Painterly Style (Cozy & Warm)</p>

    <div class="control-box">
        <span class="section-label">PENGATURAN VISUAL</span>
        <div class="grid-2">
            <div>
                <label>Gaya Visual</label>
                <select id="art-style" style="font-weight:bold;">
                    <option value="paper">‚úÇÔ∏è 3D Paper Craft</option>
                    <option value="watercolor">üé® Watercolor (Cat Air)</option>
                    <option value="smooth_painterly" selected>üñºÔ∏è Smooth Painterly (Halus & Hangat)</option>
                </select>
            </div>
            <div>
                <label>Mode Konten</label>
                <select id="mode" onchange="toggleMode()">
                    <option value="single">Single Image</option>
                    <option value="carousel">Carousel</option>
                </select>
            </div>
        </div>
    </div>

    <div class="control-box">
        <span class="section-label">SUMBER BACKGROUND</span>
        
        <div class="bg-toggle">
            <div class="bg-option active" id="opt-color" onclick="toggleBgSource('color')">üé® Warna Polos</div>
            <div class="bg-option" id="opt-photo" onclick="toggleBgSource('photo')">üì∏ Upload Foto</div>
        </div>

        <div id="section-color">
            <div class="grid-2">
                <div>
                    <label>Pilih Warna</label>
                    <select id="bg-color">
                        <option value="Warm Beige">Warm Beige</option>
                        <option value="Clean White">Clean White</option>
                        <option value="Soft Pastel Pink">Soft Pink</option>
                        <option value="Pale Blue">Pale Blue</option>
                        <option value="Soft Mint Green">Mint Green</option>
                        <option value="Deep Navy Blue">Navy Blue</option>
                        <option value="Emerald Green">Emerald Green</option>
                    </select>
                </div>
                <div>
                    <label>Ikon Dekorasi (Melayang)</label>
                    <input type="text" id="icons" value="Daun, awan, buku" placeholder="Benda...">
                </div>
            </div>
        </div>

        <div id="section-photo" style="display:none;">
            <label>Link Gambar / URL Foto (Wajib)</label>
            <input type="text" id="bg-url" placeholder="Paste link gambar di sini (Contoh: https://i.imgur.com/...)">
            <p style="font-size:10px; color:#666; margin-top:3px;">*Tips: Upload foto ke Discord/Imgur, lalu copy link-nya ke sini.</p>
            
            <div style="margin-top:10px;">
                <label>Deskripsi Foto (Agar AI Paham)</label>
                <input type="text" id="bg-desc" placeholder="Contoh: Masjid Nabawi, Ruang Kelas, Pemandangan Gunung...">
            </div>

            <div style="margin-top:20px; background: #eceff1; padding: 10px; border-radius: 10px;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;">
                    <label style="margin:0;">Kemiripan dengan Foto Asli (--iw)</label>
                    <span id="iw-display" style="font-size:12px; font-weight:bold; color:#d84315;">1.0 (Seimbang)</span>
                </div>
                <input type="range" id="iw-slider" min="0.5" max="2.0" step="0.25" value="1.0" oninput="updateIwLabel(this.value)">
                <div style="display:flex; justify-content:space-between; font-size:10px; color:#78909c; margin-top:2px;">
                    <span>Lebih Kreatif</span>
                    <span>Sangat Mirip</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="grid-2" style="margin-bottom:20px;">
        <div>
            <label>Rasio Gambar</label>
            <select id="ratio">
                <option value="--ar 4:5">Portrait (IG Feed)</option>
                <option value="--ar 1:1">Square (1:1)</option>
                <option value="--ar 9:16">Reels / Story</option>
            </select>
        </div>
        <div>
            <label>Footer Sosmed</label>
            <input type="text" id="sosmed" placeholder="Contoh: @temanguru">
        </div>
    </div>

    <div class="control-box">
        <span class="section-label">üß¨ KARAKTER (KARTUN)</span>
        <div class="grid-3">
            <div>
                <label>Gender</label>
                <select id="char-gender">
                    <option value="Muslim man">Pria Muslim</option>
                    <option value="Muslim woman hijab">Wanita Hijab</option>
                    <option value="Little Muslim boy">Anak Laki</option>
                    <option value="Little Muslim girl hijab">Anak Perempuan</option>
                </select>
            </div>
            <div>
                <label>Atasan</label>
                <input type="text" id="char-top" placeholder="Misal: Koko Putih">
            </div>
            <div>
                <label>Bawahan</label>
                <input type="text" id="char-bottom" placeholder="Misal: Sarung Biru">
            </div>
        </div>
    </div>

    <div id="single-area">
        <div class="slide-item">
            <div class="slide-badge">SINGLE POST</div>
            <label>Aktivitas Karakter</label>
            <input type="text" id="act-single" placeholder="Sedang apa?">
            <div class="text-group">
                <div><label>Judul (Atas)</label><input type="text" id="head-single"></div>
                <div><label>Sub-Teks</label><input type="text" id="sub-single"></div>
            </div>
        </div>
    </div>

    <div id="carousel-area" style="display:none">
        <div style="margin-bottom:15px;">
            <label>Jumlah Slide</label>
            <select id="slide-count" style="width:100px" onchange="renderSlides()">
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>
        <div id="slides-container"></div>
    </div>

    <button class="generate-btn" onclick="generatePrompt()">‚ú® GENERATE PROMPT (V8.3)</button>

    <div class="result-box" id="resultArea">
        <h3 style="text-align:center; font-size:14px; color:#555; margin-bottom:15px;">SALIN HASIL DI BAWAH:</h3>
        <div id="outputContainer"></div>
    </div>
</div>

<script>
    // --- KAMUS TRANSLATE ---
    const dictionary = {
        "putih":"white", "hitam":"black", "merah":"red", "biru":"blue", "hijau":"green", 
        "kuning":"yellow", "coklat":"brown", "abu":"grey", "koko":"koko shirt", 
        "kemeja":"shirt", "kaos":"t-shirt", "gamis":"robe", "celana":"trousers", 
        "sarung":"sarong", "rok":"skirt", "jilbab":"hijab", "duduk":"sitting", 
        "berdiri":"standing", "baca":"reading", "sholat":"praying", "masjid":"mosque"
    };

    function translate(text) {
        if(!text) return "";
        let cleanText = text.toLowerCase();
        cleanText = cleanText.replace("baju koko", "koko shirt");
        cleanText = cleanText.replace("wanita hijab", "woman wearing hijab");
        return cleanText.split(' ').map(w => dictionary[w] || w).join(' ');
    }

    // --- UI LOGIC ---
    let bgSource = 'color'; // Default

    function toggleBgSource(source) {
        bgSource = source;
        document.getElementById('opt-color').className = source === 'color' ? 'bg-option active' : 'bg-option';
        document.getElementById('opt-photo').className = source === 'photo' ? 'bg-option active' : 'bg-option';
        
        document.getElementById('section-color').style.display = source === 'color' ? 'block' : 'none';
        document.getElementById('section-photo').style.display = source === 'photo' ? 'block' : 'none';
    }

    function toggleMode() {
        const isCarousel = document.getElementById('mode').value === 'carousel';
        document.getElementById('single-area').style.display = isCarousel ? 'none' : 'block';
        document.getElementById('carousel-area').style.display = isCarousel ? 'block' : 'none';
        if(isCarousel) renderSlides();
    }

    function updateIwLabel(val) {
        let desc = "";
        if(val <= 0.75) desc = "(Lebih Kreatif)";
        else if(val >= 1.75) desc = "(Sangat Mirip Foto)";
        else desc = "(Seimbang)";
        document.getElementById('iw-display').innerText = `${val} ${desc}`;
    }

    function renderSlides() {
        const count = document.getElementById('slide-count').value;
        const container = document.getElementById('slides-container');
        container.innerHTML = "";
        for(let i=1; i<=count; i++) {
            container.innerHTML += `
            <div class="slide-item">
                <div class="slide-badge">SLIDE ${i}</div>
                <label>Aktivitas</label>
                <input type="text" id="act-${i}" placeholder="Aktivitas...">
                <div class="text-group">
                    <div><label>Judul</label><input type="text" id="head-${i}"></div>
                    <div><label>Sub-Teks</label><input type="text" id="sub-${i}"></div>
                </div>
            </div>`;
        }
    }

    // --- GENERATOR LOGIC ---
    function generatePrompt() {
        const styleType = document.getElementById('art-style').value;
        const ratio = document.getElementById('ratio').value;
        const sosmed = document.getElementById('sosmed').value;

        // 1. SETUP ENVIRONMENT
        let envPrompt = "";
        let urlPrefix = ""; 
        let extraParams = ""; 

        if (bgSource === 'color') {
            const bg = document.getElementById('bg-color').value;
            let iconsRaw = translate(document.getElementById('icons').value) || "abstract shapes";
            
            if (styleType === 'paper') {
                envPrompt = `Environment: Floating 3D paper ${iconsRaw} in the background and blurry bokeh ${iconsRaw} in the very front. Background: ${bg} solid color.`;
            } else if (styleType === 'watercolor') {
                envPrompt = `Environment: Surrounded by hand-painted ${iconsRaw} elements integrated into the paper texture. Background: Textured watercolor paper with ${bg} wash.`;
            } else { // Smooth Painterly (Gaya Baru)
                envPrompt = `Environment: A smooth, atmospheric digital painting background. Soft, blended colors forming impressionistic ${iconsRaw} with warm, diffused lighting. The background color is a gentle ${bg} gradient. Painterly style with subtle canvas texture.`;
            }

        } else {
            // -- LOGIKA FOTO CUSTOM --
            const rawUrl = document.getElementById('bg-url').value;
            const bgDesc = translate(document.getElementById('bg-desc').value) || "scenery";
            
            if(rawUrl) {
                urlPrefix = `${rawUrl} `;
                const iwVal = document.getElementById('iw-slider').value;
                extraParams = ` --iw ${iwVal}`;
            }

            if (styleType === 'paper') {
                envPrompt = `Environment: The background is based on the reference image depicting [${bgDesc}], but completely TRANSFORMED into 3D paper craft style, folded paper texture, low poly scenic design. The character stands in front of this paper set.`;
            } else if (styleType === 'watercolor') {
                envPrompt = `Environment: The background is based on the reference image depicting [${bgDesc}], but completely TRANSFORMED into a hand-drawn watercolor painting, soft blended colors, artistic interpretation of [${bgDesc}].`;
            } else { // Smooth Painterly (Gaya Baru) - MENIRU FOTO REFERENSI
                envPrompt = `Environment: The background is based on the reference image depicting [${bgDesc}], but completely TRANSFORMED into a smooth, refined digital painting style. Soft lighting, blended brushwork, atmospheric perspective, cozy mood, interpreting [${bgDesc}] with warm tones.`;
            }
        }

        // 2. SETUP STYLE GLOBAL
        let mainStyle = "";
        let textStyle = "";
        if (styleType === 'paper') {
            mainStyle = "3D paper craft illustration, origami style, folded paper texture, low poly art";
            textStyle = "3D paper text";
        } else if (styleType === 'watercolor') {
            mainStyle = "Hand-drawn watercolor illustration, soft pastel tones, emotional mood, storybook style";
            textStyle = "watercolor typography";
        } else { // Smooth Painterly (Gaya Baru)
            mainStyle = "Smooth digital painting style, refined brushwork, soft atmospheric lighting, warm tones, cozy mood, highly detailed painterly rendering, subtle canvas texture";
            textStyle = "elegant painterly text";
        }

        // 3. CHARACTER DNA
        const gender = document.getElementById('char-gender').value;
        const top = translate(document.getElementById('char-top').value) || "cream shirt";
        const bot = translate(document.getElementById('char-bottom').value) || "brown trousers";
        let charStyle = "";
        if (styleType === 'paper') {
            charStyle = 'origami style';
        } else if (styleType === 'watercolor') {
            charStyle = 'whimsical watercolor style';
        } else { // Smooth Painterly
            charStyle = 'rendered in a smooth painterly style with soft shading and warm highlights';
        }
        const charDNA = `A cute stylized faceless ${gender}, cartoon proportions, simplified anatomy (not realistic), wearing ${top} and ${bot}, rendered in ${charStyle}`;

        // 4. GENERATE
        const mode = document.getElementById('mode').value;
        let html = "";

        if(mode === 'single') {
            html = buildCardHTML("Single Post", 
                document.getElementById('act-single').value,
                document.getElementById('head-single').value,
                document.getElementById('sub-single').value,
                mainStyle, charDNA, envPrompt, textStyle, sosmed, ratio, styleType, urlPrefix, extraParams
            );
        } else {
            const count = document.getElementById('slide-count').value;
            for(let i=1; i<=count; i++) {
                html += buildCardHTML(`Slide ${i}`,
                    document.getElementById(`act-${i}`).value,
                    document.getElementById(`head-${i}`).value,
                    document.getElementById(`sub-${i}`).value,
                    mainStyle, charDNA, envPrompt, textStyle, sosmed, ratio, styleType, urlPrefix, extraParams
                );
            }
        }

        document.getElementById('outputContainer').innerHTML = html;
        document.getElementById('resultArea').style.display = 'block';
    }

    function buildCardHTML(label, actRaw, head, sub, mainStyle, charDNA, envPrompt, textStyle, sosmed, ratio, styleType, urlPrefix, extraParams) {
        let act = translate(actRaw) || "standing";
        
        let layoutPrompt = "";
        if(head || sub) {
            layoutPrompt += `. Text Layout: Big bold ${textStyle} "${head||''}" placed in the top negative space. `;
            if(sub) layoutPrompt += `Below it, smaller text "${sub}". `;
            layoutPrompt += "Ensure text DOES NOT cover the character. ";
            
            if(styleType === 'paper') layoutPrompt += `Composition: Character positioned in lower section. Negative space at top. `;
            else layoutPrompt += `Composition: Character at bottom. Empty space at top for text. `;
        } else {
            layoutPrompt += `Composition: Character centered. `;
        }

        let footer = sosmed ? `Footer: Small text "${sosmed}" at bottom edge. ` : "";
        
        // GABUNGKAN SEMUA
        const fullPrompt = `${urlPrefix}${mainStyle}. ${charDNA}, ${act}${layoutPrompt} ${envPrompt} ${footer} high quality. ${ratio}${extraParams}`;
        
        const uniqueId = "prompt-" + Math.random().toString(36).substr(2, 9);
        return `
        <div class="prompt-card">
            <div style="margin-bottom:5px; color:#b0bec5; font-size:10px; text-transform:uppercase; font-weight:bold;">${label}</div>
            <div id="${uniqueId}" style="margin-right:70px; word-wrap:break-word;">${fullPrompt}</div>
            <button class="copy-btn" onclick="copySafe('${uniqueId}', this)">COPY</button>
        </div>`;
    }

    function copySafe(elementId, btnElement) {
        const textToCopy = document.getElementById(elementId).innerText;
        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(textToCopy).then(() => showCopied(btnElement)).catch(() => fallbackCopy(textToCopy, btnElement));
        } else { fallbackCopy(textToCopy, btnElement); }
    }

    function fallbackCopy(text, btnElement) {
        let textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed"; textArea.style.left = "-9999px";
        document.body.appendChild(textArea);
        textArea.focus(); textArea.select();
        try { document.execCommand('copy'); showCopied(btnElement); } catch (err) { alert('Copy manual ya!'); }
        document.body.removeChild(textArea);
    }

    function showCopied(btnElement) {
        const originalText = btnElement.innerText;
        btnElement.innerText = "COPIED!";
        btnElement.style.background = "#26a69a";
        setTimeout(() => {
            btnElement.innerText = originalText;
            btnElement.style.background = "#546e7a";
        }, 1500);
    }
</script>
</body>
</html>
